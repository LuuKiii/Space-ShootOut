(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function e(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(o){if(o.ep)return;o.ep=!0;const r=e(o);fetch(o.href,r)}})();var c=function(){function n(){this.element=document.querySelector("#main__canvas"),this.context=this.element.getContext("2d"),this.boundingRect=this.element.getBoundingClientRect(),this.width=this.element.width=800,this.height=this.element.height=600}return n.getContext=function(){return this.getInstance(),this.instance.context},n.getDimensions=function(){return this.getInstance(),{width:this.instance.width,height:this.instance.height}},n.getInstance=function(){return n.instance||(n.instance=new n),n.instance},n}(),O=function(){function n(){this.observersMouse=[],this.observersKeyboard=[],this._mouse={x:0,y:0,button:{}},this._keyboard={},this.canvas=c.getInstance(),this.container=document.querySelector(".container"),this.initMouseEvents(),this.initKeyboardEvents()}return n.prototype.initMouseEvents=function(){var t=this;this.canvas.element.addEventListener("mousemove",function(e){t._mouse.x=e.x-t.canvas.boundingRect.x,t._mouse.y=e.y-t.canvas.boundingRect.y}),this.canvas.element.addEventListener("mousedown",function(e){t._mouse.button[s[e.button]]=!0,t.notifyFromMouse()}),this.canvas.element.addEventListener("mouseup",function(e){delete t._mouse.button[s[e.button]],t.notifyFromMouse()}),this.canvas.element.addEventListener("contextmenu",function(e){e.preventDefault(),t.notifyFromMouse()}),this.canvas.element.addEventListener("wheel",function(e){e.preventDefault(),e.deltaY>0?t._mouse.button[s[s.ScrollDown]]=!0:e.deltaY<0&&(t._mouse.button[s[s.ScrollUp]]=!0),t.notifyFromMouse(),delete t._mouse.button[s[s.ScrollDown]],delete t._mouse.button[s[s.ScrollUp]]}),this.canvas.element.addEventListener("mouseleave",function(e){for(var i in t.mouse.button)delete t.mouse.button[i];t.notifyFromMouse()})},n.prototype.initKeyboardEvents=function(){var t=this;this.container.addEventListener("keydown",function(e){t._keyboard[e.key]=!0,t.notifyFromKeyDown(e.key)}),this.container.addEventListener("keyup",function(e){delete t._keyboard[e.key],t.notifyFromKeyUp(e.key)})},n.prototype.registerMouse=function(t){if(t.updateFromMouse==null)throw new Error("updateFromMouse Method is not implemented");this.observersMouse.push(t)},n.prototype.unregisterMouse=function(t){var e=this.observersMouse.indexOf(t);e>-1&&this.observersMouse.splice(e,1)},n.prototype.notifyFromMouse=function(){this.observersMouse.forEach(function(t){return t.updateFromMouse()})},n.prototype.registerKeyboard=function(t){if(t.updateFromKeyUp==null||t.updateFromKeyDown==null)throw new Error("updateFromKeyboard Methods are not implemented");this.observersKeyboard.push(t)},n.prototype.unregisterKeyboard=function(t){var e=this.observersKeyboard.indexOf(t);e>-1&&this.observersKeyboard.splice(e,1)},n.prototype.notifyFromKeyUp=function(t){this.observersKeyboard.forEach(function(e){return e.updateFromKeyUp(t)})},n.prototype.notifyFromKeyDown=function(t){this.observersKeyboard.forEach(function(e){return e.updateFromKeyDown(t)})},Object.defineProperty(n.prototype,"mouse",{get:function(){return this._mouse},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"keyboard",{get:function(){return this._keyboard},enumerable:!1,configurable:!0}),n.getInstance=function(){return n.instace||(n.instace=new n),n.instace},n}(),s;(function(n){n[n.LPM=0]="LPM",n[n.MMB=1]="MMB",n[n.PPM=2]="PPM",n[n.ScrollDown=3]="ScrollDown",n[n.ScrollUp=4]="ScrollUp"})(s||(s={}));var b=function(){function n(){}return n.getResourcePath=function(t){return this.ASSETS_PATH+t},n.ASSETS_PATH="/Space-ShootOut/src/assets/",n}(),D=function(){function n(){this.image=new Image,this.canvas=c.getInstance(),this.resourcesLoaded=!1,this.init()}return n.prototype.init=function(){var t=this;this.image.onload=function(){t.resourcesLoaded=!0},this.image.src=b.getResourcePath("nebula.jpg")},n.prototype.drawBackground=function(){this.canvas.context.drawImage(this.image,0,0)},n.getInstance=function(){return n.instance||(n.instance=new n),n.instance},n}(),A=function(){function n(){}return n.fpsLock=60,n}(),S=function(){function n(){this.observers=[],this._playerDead=!1}return Object.defineProperty(n.prototype,"playerDead",{get:function(){return this._playerDead},set:function(t){this._playerDead=t,this.notify()},enumerable:!1,configurable:!0}),n.prototype.notify=function(){this.observers.forEach(function(t){return t.updateFromSubject()})},n.prototype.register=function(t){this.observers.push(t)},n.prototype.unregister=function(t){var e=this.observers.indexOf(t);e>-1&&this.observers.splice(e,1)},n.getInstance=function(){return n.instance||(n.instance=new n),n.instance},n}(),m=function(){return m=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},m.apply(this,arguments)},M=function(){function n(){this._position={x:0,y:0},this._delta={x:0,y:0},this._radius=0,this._isToBeRemoved=!1}return Object.defineProperty(n.prototype,"id",{get:function(){if(this._id)return this._id;throw new Error("Id is not set")},set:function(t){if(!this._id)this._id=t;else throw new Error("Cannot overwrite existing id")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"position",{get:function(){return m({},this._position)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"delta",{get:function(){return m({},this._delta)},set:function(t){this._delta=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"radius",{get:function(){return this._radius},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isToBeRemoved",{get:function(){return this._isToBeRemoved},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"originAndRadius",{get:function(){return{id:this.id,x:this.position.x,y:this.position.y,radius:this.radius}},enumerable:!1,configurable:!0}),n}(),j=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(i[r]=o[r])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),v=function(n){j(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e._health=0,e._damageTakenFromCollision=0,e._damageDealtByColliding=0,e._resourcesLoaded=!1,e}return t.prototype.createMovementObject=function(){var e=1,i=.05;return{maxSpeed:e,acceleration:{forward:i,left:i,right:i,backwards:i}}},t.prototype.createAngleObject=function(){return{rotation:0,rotationSpeed:0,rotationMaxSpeed:.025,rotationModifier:.001,get facing(){return(this.rotation-.5*Math.PI)%Math.PI*2},moveAngle:0}},Object.defineProperty(t.prototype,"angle",{get:function(){return this._angle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"movement",{get:function(){return this._movement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"health",{get:function(){return this._health},set:function(e){this._health=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"damageTakenFromCollision",{get:function(){return this._damageTakenFromCollision},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"damageDealtByColliding",{get:function(){return this._damageDealtByColliding},enumerable:!1,configurable:!0}),t}(M),T=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(i[r]=o[r])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),E=function(n){T(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e._chance={toFire:0},e}return Object.defineProperty(t.prototype,"chance",{get:function(){return this._chance},enumerable:!1,configurable:!0}),t}(v),u=function(){function n(){}return n.generateID=function(){var t=new Date().getTime();return"xxxxxxxxxxxy".replace(/[xy]/g,function(e){var i=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(e==="x"?i:i&3|8).toString(16)})},n.calculateRotationTowardsEntity=function(t,e){return Math.atan2(e.x-t.x,-(e.y-t.y))},n.calculateRotationToFaceAwayEntity=function(t,e){return Math.atan2(t.x-e.x,-(t.y-e.y))},n.calculateAngle=function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)},n.calculateVelocityAngle=function(t){return{x:Math.cos(t),y:Math.sin(t)}},n.calculateVelocity=function(t,e,i){return e.x,{x:Math.cos(t),y:Math.sin(t)}},n.calculateDistanceBetweenPoints=function(t,e){var i=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));return i},n.getCoordinatesOutOfBounds=function(t,e){t===void 0&&(t=0),e===void 0&&(e=Math.random()*4|0);var i={x:0,y:0},o=c.getDimensions();return e%2===1?(i.y=Math.random()*o.height|0,i.x=e===1?t+o.width:-t):(i.x=Math.random()*o.width|0,i.y=e===0?-t:o.height+t),i},n.getCoordinatesInbound=function(t){t===void 0&&(t=0);var e=c.getDimensions(),i=Math.random()*(e.width-2*t)+t|0,o=Math.random()*(e.height-2*t)+t|0;return{x:i,y:o}},n}(),f=function(){function n(){}return n.faceTowardsPlayer=function(t){t.angle.rotation=u.calculateRotationTowardsEntity(t.position,y.getPosition())},n.faceAwayFromPlayer=function(t){t.angle.rotation=u.calculateRotationToFaceAwayEntity(t.position,y.getPosition())},n.moveToRandomWaypoint=function(t){},n.moveToRandomWaypointAndStop=function(t){t.movingAction===d.Stopped&&(t.destinationPoint=u.getCoordinatesInbound(50),t.angle.moveAngle=u.calculateAngle(t.position,t.destinationPoint),t.delta=u.calculateVelocityAngle(t.angle.moveAngle),t.movingAction=d.Accelerating)},n.fireAtPlayer=function(t){if(!g.isWholeOutOfBounds(t.originAndRadius)){var e=t.chance.toFire>Math.random();if(e){var i=u.calculateAngle(t.position,y.getPosition()),o=u.calculateVelocityAngle(i),r=o.x,a=o.y,l=new I({x:t.position.x,y:t.position.y},{x:r,y:a},["player"]),p=_.getInstance();p.addEntity("enemyWeaponry",l)}}},n.none=function(t){},n}(),d={Accelerating:0,Decelerating:1,Stopped:2,Moving:3},F={faceTowardsPlayer:f.faceTowardsPlayer,faceAwayFromPlayer:f.faceAwayFromPlayer,moveToRandomWaypoint:f.moveToRandomWaypoint,moveToRandomWaypointAndStop:f.moveToRandomWaypointAndStop,fireAtPlayer:f.fireAtPlayer,none:f.none},R=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(i[r]=o[r])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),k=function(n){R(t,n);function t(e){var i=n.call(this)||this;return i.image=new Image,i.movingAction=d.Stopped,i.destinationPoint=null,i.targetFacing=11/6*Math.PI,i.behaviours=["faceTowardsPlayer","moveToRandomWaypointAndStop","fireAtPlayer"],i.weaponry="Cannon",i.ctx=c.getContext(),i._position=e,i._movement=i.createMovementObject(),i._angle=i.createAngleObject(),i.init(),i}return t.prototype.init=function(){var e=this;this.image.onload=function(){e._resourcesLoaded=!0},this.image.src=b.getResourcePath("SCruiser.png"),this._radius=30,this._health=100,this._damageDealtByColliding=30,this._damageTakenFromCollision=1e3,this.setChances()},t.prototype.setChances=function(){this.chance.toFire=.005},t.prototype.draw=function(){this.ctx.save(),this.ctx.translate(this.position.x,this.position.y),this.ctx.rotate(this._angle.rotation),this.ctx.drawImage(this.image,-this.radius,-this.radius,2*this.radius,2*this.radius),this.ctx.restore()},t.prototype.update=function(){this.movingAction!==d.Stopped&&this.calculateMovement(),this.updateRotation(),this.angle.rotation+=this.angle.rotationSpeed,this._health<=0&&(this._isToBeRemoved=!0)},t.prototype.updateFromBehaviours=function(){for(var e=0,i=this.behaviours;e<i.length;e++){var o=i[e];F[o](this)}},t.prototype.calculateMovement=function(){this._position.x+=this.delta.x,this._position.y+=this.delta.y,this.updateMovingAction()},t.prototype.updateMovingAction=function(){var e=10;u.calculateDistanceBetweenPoints(this.position,this.destinationPoint)<e&&(this.movingAction=d.Decelerating)},t.prototype.updateRotation=function(){if(this.targetFacing!==null){var e=Math.pow(this.angle.rotationSpeed,2)/(2*this.angle.rotationModifier);console.log(e),this.angle.rotationSpeed<e,console.log(this.targetFacing),console.log(this.targetFacing-this.angle.facing),console.log("=============================================="),this.targetFacing-this.angle.facing>0?this.angle.rotationSpeed+=this.angle.rotationModifier:this.angle.rotationSpeed-=this.angle.rotationModifier,Math.abs(this.angle.rotationSpeed)>this.angle.rotationMaxSpeed&&(this.angle.rotationSpeed=Math.sign(this.angle.rotationSpeed)*this.angle.rotationMaxSpeed)}},t.prototype.updateDelta=function(){},t.prototype.calculateDeltaModifier=function(e,i,o,r,a){return{x:0,y:0}},t}(E),_=function(){function n(){this.testCounter=1,this._core={player:{},playerWeaponry:{},enemies:{},enemyWeaponry:{},misc:{}},this._coreProperties={player:{size:0},playerWeaponry:{size:0},enemies:{size:0},enemyWeaponry:{size:0},misc:{size:0},size:0},this.createPlayer()}return n.prototype.createPlayer=function(){if(Object.keys(this._core.player).length>0)throw new Error("Player Already exists");var t=y.getInstance();this.addEntity("player",t)},n.prototype.getPlayer=function(){return this._core.player[Object.keys(this._core.player)[0]]},n.prototype.removeEntityFrom=function(t,e){this._coreProperties[t].size--,this._coreProperties.size--,delete this._core[t][e]},n.prototype.addEntity=function(t,e){var i=u.generateID();e.id=i,this._core[t][i]=e,this._coreProperties[t].size++,this._coreProperties.size++},n.prototype.updateAndDrawAllEntities=function(){for(var t in this._core){var e=this._core[t];for(var i in e){var o=e[i];o.update(),o.draw(),o.isToBeRemoved&&this.removeEntityFrom(t,o.id)}}},n.getEntitiesByCorePropertyName=function(t){if(!n.instance)return[];var e=[],i=[];for(var o in n.instance._core)t&&!t.includes(o)||e.push(o);for(var r=0,a=e;r<a.length;r++){var o=a[r],l=n.instance._core[o];for(var p in l){var x=l[p];i.push(x)}}return i},n.prototype.spawner=function(){if(!(this.testCounter<=0))for(this.testCounter--;this.enemySize<5;)this.createRandomBasicEnemy()},n.prototype.createRandomBasicEnemy=function(){var t={x:100,y:100},e=new k(t);this.addEntity("enemies",e)},Object.defineProperty(n.prototype,"coreSize",{get:function(){return this._coreProperties.size},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"enemySize",{get:function(){return this._coreProperties.enemies.size},enumerable:!1,configurable:!0}),n.getInstance=function(){return n.instance||(n.instance=new n),n.instance},n}(),g=function(){function n(){}return n.isWholeInbouds=function(t){return!(t.x-t.radius<0||t.x+t.radius>n.canvasDimensions.width||t.y+t.radius>n.canvasDimensions.height||t.y-t.radius<0)},n.isWholeOutOfBounds=function(t){return t.x+t.radius<0||t.x-t.radius>n.canvasDimensions.width||t.y-t.radius>n.canvasDimensions.height||t.y+t.radius<0},n.entitiesAreIntersecting=function(t,e){var i=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),o=t.radius+e.radius;return i<o},n.entitiesObjectIsIntersectingWith=function(t,e){var i=_.getEntitiesByCorePropertyName(e),o=[];return i.forEach(function(r){n.entitiesAreIntersecting(t,r.originAndRadius)&&o.push(r)}),o.filter(function(r){return r.id!==t.id})},n.canvasDimensions=c.getDimensions(),n}(),W=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(i[r]=o[r])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),w=function(){return w=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},w.apply(this,arguments)},y=function(n){W(t,n);function t(e){var i=n.call(this)||this;return i.image=new Image,i.ctx=c.getContext(),i.canvasEvents=O.getInstance(),i.flags=S.getInstance(),i._position=w({},e),i._movement=i.createMovementObject(),i._angle=i.createAngleObject(),i.init(),i}return t.prototype.init=function(){var e=this;this.image.onload=function(){e._resourcesLoaded=!0},this.image.src=b.getResourcePath("Player.png"),this._health=100,this._radius=30,this._movement.maxSpeed=1,this._movement.acceleration.forward=.08,this._movement.acceleration.backwards=.03,this._movement.acceleration.left=.03,this._movement.acceleration.right=.03,this._damageTakenFromCollision=30},t.prototype.draw=function(){this.ctx.save(),this.ctx.translate(this.position.x,this.position.y),this.ctx.rotate(this._angle.rotation),this.ctx.drawImage(this.image,-this.radius,-this.radius,2*this.radius,2*this.radius),this.ctx.restore()},t.prototype.update=function(){var e=this;this.updateProperties(),this._position.x+=this.delta.x,this._position.y+=this.delta.y;var i=g.entitiesObjectIsIntersectingWith(this.originAndRadius,["enemies"]);i.forEach(function(o){o instanceof v&&C.updateCollidedShips(e,o)}),this.health<=0&&(this.flags.playerDead=!0)},t.prototype.updateProperties=function(){this.updateRotation(),this.updateDelta(),this.angle.rotation+=this.angle.rotationSpeed,g.isWholeInbouds(this.originAndRadius)||(this._position.x-=this.delta.x,this._position.y-=this.delta.y,this._delta.x=-this.delta.x/4,this._delta.y=-this.delta.y/4)},t.prototype.updateRotation=function(){if(this.angle.rotationSpeed>-this.angle.rotationMaxSpeed&&this.canvasEvents.keyboard.q)this.angle.rotationSpeed-=this.angle.rotationModifier;else if(this.angle.rotationSpeed<this.angle.rotationMaxSpeed&&this.canvasEvents.keyboard.e)this.angle.rotationSpeed+=this.angle.rotationModifier;else{var e=.3*this.angle.rotationModifier;this.angle.rotationSpeed=Math.abs(this.angle.rotationSpeed)-this.angle.rotationModifier>0?this.angle.rotationSpeed+-Math.sign(this.angle.rotationSpeed)*e:0}},t.prototype.updateDelta=function(){var e=this.delta,i=Math.sqrt(Math.pow(this.delta.x,2)+Math.pow(this.delta.y,2));this.canvasEvents.keyboard.w&&(e=this.calculateDeltaModifier(i,this.angle.facing,e,this.movement.acceleration.forward,this.movement.maxSpeed)),this.canvasEvents.keyboard.s&&(e=this.calculateDeltaModifier(i,this.angle.facing-Math.PI,e,this.movement.acceleration.backwards,this.movement.maxSpeed)),this.canvasEvents.keyboard.a&&(e=this.calculateDeltaModifier(i,this.angle.facing-Math.PI*.5,e,this.movement.acceleration.left,this.movement.maxSpeed)),this.canvasEvents.keyboard.d&&(e=this.calculateDeltaModifier(i,this.angle.facing+Math.PI*.5,e,this.movement.acceleration.right,this.movement.maxSpeed)),this._delta.x=e.x,this._delta.y=e.y},t.prototype.calculateDeltaModifier=function(e,i,o,r,a){var l=u.calculateVelocity(i,this.delta,r),p=l.x,x=l.y;if(e>=a){var P=a/e;o.x*=P,o.y*=P}return o.x+=p/4*r,o.y+=x/4*r,o},t.getInstance=function(){if(!t.instance){var e=c.getDimensions();t.instance=new t({x:e.width/2,y:e.height/2})}return t.instance},t.getPosition=function(){return t.getInstance().position},t}(v),C=function(){function n(){}return n.updateCollidedShips=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t.forEach(function(i){i instanceof y&&n.updateColidedPlayer(i),i instanceof E&&n.updateColidedEnemy(i)})},n.updateColidedEnemy=function(t){t.health-=t.damageTakenFromCollision},n.updateColidedPlayer=function(t){t.health-=t.damageTakenFromCollision},n.updateProjectileHit=function(t,e){e.health-=t.damageDealt,t.onHitUpdate()},n}(),L=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(i[r]=o[r])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),B=function(n){L(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e._damages=[],e._damageDealt=0,e}return Object.defineProperty(t.prototype,"damages",{get:function(){return this._damages},set:function(e){this._damages=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"damageDealt",{get:function(){return this._damageDealt},enumerable:!1,configurable:!0}),t.prototype.onHitUpdate=function(){this._isToBeRemoved=!0},t}(M),K=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(i[r]=o[r])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),h=function(){return h=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},h.apply(this,arguments)},I=function(n){K(t,n);function t(e,i,o){var r=n.call(this)||this;return r.ctx=c.getContext(),r._position=h({},e),r._delta=h({},i),r.damages=o,r.init(),r}return t.prototype.init=function(){this._radius=10,this._damageDealt=60},t.prototype.draw=function(){this.ctx.beginPath(),this.ctx.arc(this.position.x,this.position.y,this._radius,0,Math.PI*2),this.ctx.fill()},t.prototype.update=function(){var e=this;this._position.x=this.position.x+this.delta.x,this._position.y=this.position.y+this.delta.y,g.isWholeOutOfBounds(this.originAndRadius)&&(this._isToBeRemoved=!0);var i=g.entitiesObjectIsIntersectingWith(this.originAndRadius,this.damages);i.forEach(function(o){o instanceof v&&C.updateProjectileHit(e,o)})},Object.defineProperty(t.prototype,"position",{get:function(){return h({},this._position)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"delta",{get:function(){return h({},this._delta)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this._radius},enumerable:!1,configurable:!0}),t}(B),H=function(){function n(){this.canvasEvents=O.getInstance(),this.globalObj=_.getInstance(),this.player=this.globalObj.getPlayer(),this.isFiring=!1,this.onCooldown=!1,this.canvasEvents.registerKeyboard(this)}return n.prototype.playerFiring=function(){this.isFiring&&(this.onCooldown||(this.fire(),this.setCooldown(.5)))},n.prototype.fire=function(){var t=u.calculateVelocityAngle(this.player.angle.facing),e=t.x,i=t.y,o=new I({x:this.player.position.x,y:this.player.position.y},{x:e,y:i},["enemies"]);this.globalObj.addEntity("playerWeaponry",o)},n.prototype.updateFromKeyDown=function(t){t===" "&&(this.isFiring=!0)},n.prototype.updateFromKeyUp=function(t){t===" "&&(this.isFiring=!1)},n.prototype.setCooldown=function(t){var e=this;t*=1e3,this.onCooldown=!0,setTimeout(function(){e.onCooldown=!1},t)},n.getInstance=function(){return n.instance||(n.instance=new n),n.instance},n}(),z=function(){function n(){this.renderBg=D.getInstance(),this.globalObj=_.getInstance(),this.playerWeaponHandler=H.getInstance(),this.flags=S.getInstance(),this.fps={fpsInterval:1e3/A.fpsLock,frameCount:0,elapsed:0,startTime:0,prevTimeStamp:0,currentTimeStamp:0},this.shouldAnimate=!1}return n.prototype.startAnimating=function(){this.flags.register(this),this.shouldAnimate=!0,this.fps.prevTimeStamp=performance.now(),this.fps.startTime=this.fps.prevTimeStamp,this.animate()},n.prototype.animate=function(){this.shouldAnimate&&requestAnimationFrame(this.animate.bind(this)),this.fps.currentTimeStamp=performance.now(),this.fps.elapsed=this.fps.currentTimeStamp-this.fps.prevTimeStamp,this.fps.elapsed>this.fps.fpsInterval&&(this.fps.prevTimeStamp=this.fps.currentTimeStamp-this.fps.elapsed%this.fps.fpsInterval,this.renderBg.drawBackground(),this.globalObj.updateAndDrawAllEntities(),this.globalObj.spawner(),this.playerWeaponHandler.playerFiring())},n.prototype.updateFromSubject=function(){},n.getInstance=function(){return this.instance||(n.instance=new n),this.instance},n}(),q=function(){function n(){this.element=document.querySelector(".hud")}return n.getInstance=function(){return n.instance||(n.instance=new n),n.instance},n}(),U=function(){function n(){this.element=document.querySelector(".menu"),this.newGameBtn=this.element.querySelector(".menu__new-game"),this.element.style.display="none"}return n.getInstance=function(){return n.instance||(n.instance=new n),n.instance},n}(),G=function(){function n(){console.log("hello"),this.menu=U.getInstance(),this.hud=q.getInstance(),this.gameLoop=z.getInstance(),this.gameLoop.startAnimating()}return n}();new G;
